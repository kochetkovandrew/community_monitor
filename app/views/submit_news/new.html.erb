<!DOCTYPE html>
<html>
<head>
  <!-- Подключаем jquery -->
  <script src='https://code.jquery.com/jquery-1.7.1.js'></script>
  <!-- Подключаем VK-->
  <script src="https://vk.com/js/api/xd_connection.js?2" type="text/javascript"></script>
  <script>
    VK.init(function() {
      $('button#submit_news').click(function() {
        $.ajax({
          type: 'POST',
          url: 'https://detivich.org/submit_news.json',
          data: {
            api_id: $('#api_id').val(),
            viewer_id: $('#viewer_id').val(),
            auth_key: $('#auth_key').val(),
            message: $('#message').val()
          },
          success: function(data) {
              $('#message').val('');
              alert("Ваша новость была отправлена");
          }
        });
      });
    });
  </script>
</head>
<!-- ОБЯЗАТЕЛЬНО указываем <body> id='body' !-->
<body style='text-align:center;'>
<%= hidden_field_tag('api_id', @api_id) %>
<%= hidden_field_tag('viewer_id', @viewer_id) %>
<%= hidden_field_tag('auth_key', @auth_key) %>
<textarea style='height: 460px; width: 570px;' id="message"></textarea>
<br>
<button type="button" id="submit_news">Предложить новость</button>
</body>
</html>